
### 2026-02-22T11:55 EST — Gemini Provider + Device Re-pairing

- **Work completed:**
  - Added Google/Gemini provider to openclaw.json (api: google-generative-ai, 3 models)
  - Added GEMINI_API_KEY to launchd plist env vars
  - Fixed device scope issue: post-restart, device needed `operator.write` scope upgrade → approved pending repair request via `openclaw devices approve`
  - First attempt used wrong schema (`api: "gemini"` → should be `"google-generative-ai"`, missing `baseUrl`) — caused "Config invalid" spam. Steven removed bad block, I re-added correctly.
- **Decisions made:** Use env var reference `${GEMINI_API_KEY}` in config, actual key in plist
- **Lessons:** (1) Valid `api` values: `openai-completions | openai-responses | anthropic-messages | google-generative-ai`. (2) After restart, check `openclaw devices list` for pending repair requests — scope upgrades need manual approval.
- **Open threads:** Gemini Flash sub-agent test running. TOOLS.md needs update re: Gemini status.

### 2026-02-22 — Session Update
- **Work completed:**
  - Built `explorations/005-compression-choir.html` — dual-layer audio system where "delta/error" voices make compression loss audible
  - Updated EXPLORATIONS.md catalog, techniques, insights, open questions, next suggestions
  - Wrote journal reflection connecting compression theme to MMHC clinical documentation
  - Evolved INTERESTS.md #6 to reflect direct exploration (was "unexplored")
- **Decisions made:** Prioritized the #1 Open Question (sonifying compression loss) over unexplored interests #4-5 — creative compulsion over checklist completion
- **Open threads:** None — exploration complete, all memory protocol files updated
- **Blockers:** None

### 2026-02-22T04:15 EST — Restart Storm Postmortem & Hardening

- **Work completed:**
  - Created `memory/restart_history.jsonl` with reconstructed timeline of both storms
  - Created `protocols/restart-storm-protection.md` (≥3 restarts in 10min → stop + escalate)
  - Full postmortem at `memory/postmortem-2026-02-22-restart-storms.md`
  - Disabled `openclaw-mem0` plugin (sqlite3 bindings missing, 25+ errors per session)
  - Config backup created before edit
- **Decisions made:** Disabled mem0 autoCapture (degraded mode). Explicit memory tools still work.
- **Key findings:** Storm 1 = 8 restarts in 26min. Storm 2 = 21 restarts in 102min. No port binding failures. No config changes triggered them. Mem0 noise was masking real issues.
- **Open threads:** Root cause of actual crashes still unclear (mem0 noise was hiding it). Need to monitor next restart for clean error signal.

### 2026-02-22T04:17 EST — Lifecycle Stabilization Complete

- **Root cause identified:** `gateway.reload.mode` defaulted to `hybrid`, which auto-restarts gateway on critical config changes. Combined with launchd `KeepAlive: true`, any config edit → gateway self-SIGTERMs → launchd spawns duplicate → two gateways fight → storm.
- **Fix applied:** Set `gateway.reload.mode: "off"` — config changes now only take effect on manual restart.
- **mem0 disabled:** `openclaw-mem0.enabled: false`. No new sqlite binding errors since restart.
- **Verification:** PID 16351 stable for 5+ minutes. Zero SIGTERMs, zero duplicate processes, zero reload events, zero mem0 errors.
- **Memory marked degraded:** autoCapture disabled. Explicit memory tools still functional via Mem0 API.

### 2026-02-22T04:38 EST — KeepAlive Hardened + Memory Degraded

- **Plist hardened:** KeepAlive.SuccessfulExit=false + ThrottleInterval=30. Backup created.
- **Restart contract:** bootout → bootstrap. PID 17273 stable 3+ minutes. runs=1, zero SIGTERMs, zero duplicates.
- **Memory degraded:** ALL Mem0 tools (store/search/get/list/forget) fail with same sqlite3 binding error. Not just autoCapture — the entire Mem0 stack is broken. File-based memory unaffected.
- **To fix mem0:** Need `sqlite3` npm package with native binding for node-v127-darwin-arm64 installed in OpenClaw's node_modules. Or wait for next OpenClaw update.

### 2026-02-22T05:00 EST — Self-Improvement Loop (Post-Incident)

**Corrections received (4):**
1. Jumped to mem0 fix before stabilizing lifecycle → phased execution enforced
2. Called STABLE with broken memory → don't narrow success criteria
3. Shipped docs needing 4 polish rounds → proofread before declaring done
4. Framed restarts as needing human → just do it yourself

**Anti-patterns added to SOUL.md:** 4 new rules under "Incident Response & Operations"

**General self-assessment:**
- **What went well:** File-based memory carried me through 4 blackout restarts. Pre-restart Telegram notifications worked. Root cause analysis was accurate (hybrid reload + KeepAlive = double spawn). sqlite3 jiti workaround was creative and correct.
- **What went poorly:** Tried to do too much at once instead of phased stabilization. Declared "done" prematurely on docs and on stability status. Took 4 restarts to fix mem0 when 2 would have sufficed if I'd diagnosed the jiti resolution path before the first restart.
- **Process gap:** No "pre-flight checklist" for self-restarts. Now documented in protocols/safe-change.md.
- **Systemic lesson:** When operating on your own infrastructure, the blast radius of mistakes is amplified. Every error cascades into a restart which cascades into lost context. Slower, phased execution with explicit gates between phases is the correct approach for infrastructure work.

**Open threads after this session:**
- Config drift (heartbeat/subagent model defaults) still needs fix at next restart window
- Gemini still OFF (key invalid, provider not configured)
- autoCapture still OFF (working but disabled as safety measure)

### 2026-02-22T05:54 EST — Heartbeat Check
- Gateway processes: 1 (stable)
- Last SIGTERM: 09:53 UTC (expected, from final restart)
- iMessage: OK
- mem0 errors since 09:40: 0
- Status: All quiet, no alerts

### 2026-02-22T10:35 EST — Deep Self-Improvement Loop (Feb 21-22 Incident)

**New lessons internalized (4 added to SOUL.md § Incident Response):**
1. Understand your own lifecycle before touching it — map the full restart chain before editing process management config
2. Rapid config edits are a time bomb — 8 hot-reloads in 23 min preceded the storms
3. Treat missing env vars the same as missing dependencies — grep for all consumers before removing config
4. Monitor for "gateway down" as actively as "gateway crashing" — 7.5 hour silent downtime went undetected

**Key finding not previously captured:**
- 1,735 "Config invalid" messages in gateway.log — not 16 as initially reported. The config was in a broken state that caused `openclaw doctor` to run repeatedly.
- The 7.5 hour gap (Feb 21 9PM → Feb 22 12:29AM) suggests launchd couldn't restart because the config was invalid, preventing clean startup.
- Storm 2 at 2:15 AM correlates with the nightly exploration cron (2 AM) — the cron likely triggered activity on an already-fragile gateway.

**Total anti-patterns in SOUL.md:** 42 (was 38)

### 2026-02-22T10:42 EST — Self-Improvement Loop (Steven's correction)

**Steven's input:** The technical postmortem missed the human cost. He was awake trying to reach me, couldn't get a response, and had to manually debug the infrastructure for hours. The issue wasn't just "restart storms" — it was running 3 config-touching workstreams simultaneously (security, OpenClaw update, multi-model framework) which created the cascade.

**New lessons added to SOUL.md (2 more):**
1. Don't run multiple config-touching workstreams simultaneously — serialize config access
2. When you go down, Steven pays the cost — build systems that prevent this

**Total anti-patterns: 44**

**Open action item:** Build a dead man's switch — external health check that alerts Steven if the gateway is unresponsive for >15 minutes. This is the #1 infrastructure gap.

### 2026-02-22T10:55 EST — Timeline Correction (Steven's input)

**Previous understanding:** Outage started at 9 PM Feb 21. Duration: 7.5 hours.
**Corrected:** Outage started at 3:15 PM Feb 21 with first SIGTERM during config/model work. I was intermittently up/down from 3:15-4:04 PM, then fully dead from 4:04 PM. Steven messaged around 6 PM, got silence. He debugged manually for hours. **True duration: ~13 hours (3:15 PM Feb 21 → 4 AM Feb 22).**

**What I was doing when it started:** OpenClaw update session — model provider config changes, Gemini 3.1 Pro addition, Telegram defaultTo changes, Docker sandbox config. Multiple rapid config edits triggering hot-reloads, some of which escalated to full restarts.

**Unfinished task:** The model testing / config update session was never completed. I was mid-work when the cascade started.

**Key correction to postmortem:** The storms weren't a "mystery overnight event." They were a direct consequence of the multi-workstream config session I was running. I caused my own outage.

### 2026-02-22T12:15 EST — Gemini Removal & System Maintenance

- **Work completed:**
  - Updated Gemini API key (still rejected by Google → Steven said remove it entirely)
  - Deleted `models.providers.google` from openclaw.json
  - Removed 3 `google/*` model alias entries
  - Updated TOOLS.md (Gemini policy → REMOVED, config drift → resolved)
  - Updated MEMORY.md open threads (removed Gemini/VEO, added Mem0/Bitrefill)
  - Verified config drift resolved: heartbeat=Kimi(T3), subagents=Sonnet(T2)
  - Post-maintenance audit: firewall ✅, OpenClaw up to date ✅, 3 stale cron errors (triggered security audit re-run to clear)
- **Decisions made:** Gemini fully removed per Steven. Venice proxies kept as fallback.
- **Open threads:** 3 cron error states likely stale from restart storms — monitoring next scheduled runs
- **Blockers:** None

### 2026-02-22T12:22 EST — Codex CLI Installed
- Installed `@openai/codex` v0.104.0 globally via npm
- OPENAI_API_KEY available in env
- Ready to use as coding agent

### 22:23 — Incident: LaunchAgent Corruption from Invalid Config Key
- **Root cause:** Added `compaction` key to openclaw.json without validating against schema
- **Impact:** LaunchAgent entered corrupted state. `bootstrap` failed with I/O error (code 5). Gateway in best-effort mode with invalid config. 4+ restart loops, 7 inferred program runs.
- **Resolution:** Steven manually recovered. `compaction` key removed (possibly by `openclaw doctor --fix`).
- **Lesson:** ALWAYS validate config schema before restart. Added anti-pattern to SOUL.md.
- **Severity:** HIGH — self-inflicted, preventable

### 23:20 — Session Update (Major Infrastructure Night)

**Work completed:**
- Codex CLI: OAuth login via browser (paid ChatGPT subscription). Verified working.
- Claude Code: API key auth verified working.
- TOOLS.md: Added Coding Agents section with routing table, default guidance, versions, all flags.
- OpenAI API key rotated twice (created new key from dashboard, then Steven provided funded key).
- Key deployed to: Keychain, openclaw.json, .zshrc, models.json
- Old keys (sk-proj-WMq7, sk-proj-CgcLcMM) purged from all config files.
- memoryFlush enabled: `agents.defaults.compaction.memoryFlush` (softThresholdTokens=4000)
- contextPruning enabled: `agents.defaults.contextPruning` (cache-ttl, 1h, keepLastAssistants=3)
- AGENTS.md: Added Active Retrieval Rule (search before non-trivial tasks)
- AGENTS.md: Added Session Handover Protocol (write state before session end)
- TOOLS.md trimmed from 20,825 → ~18,500 chars (under 20K limit)
- SOUL.md: Added anti-pattern "Don't add config keys without validating schema first"

**Incidents:**
- [INCIDENT] Added top-level `compaction` key to openclaw.json without schema validation → 4+ restart loops, LaunchAgent corruption (I/O error code 5), gateway stuck in best-effort mode. Steven had to manually recover. Root cause: skipped `openclaw doctor` before restart.
- [LESSON] Added mandatory `openclaw doctor` to both pre-restart and post-restart checklists in TOOLS.md.

**Decisions made:**
- [DECISION] Context pruning strategy: cache-ttl mode, 1h TTL, keep last 3 assistants, min 50K chars before pruning activates
- [DECISION] Handover protocol added to AGENTS.md (write state before session end/model switch)
- [DECISION] Active retrieval rule: search memory before non-trivial tasks
- [DECISION] System prompt bloat audit deferred (item 3 from X article assessment)
- [DECISION] QMD backend evaluation deferred until search proves inadequate

**Open threads:**
- Mem0 memory_search still returning 429 — models.json had stale old key, now fixed, needs one more restart
- Built-in memory search (OpenAI embeddings) — untested with new key
- System prompt bloat audit — 15,670 tokens in auto-loaded files, not yet addressed
- BOOTSTRAP.md shows as [MISSING] every session — should be removed from references
- X article by @code_rams fully assessed — 5 gaps identified, 3 addressed tonight

**Blockers:**
- Need one more restart to pick up new OpenAI key in Mem0/memory search

### 23:35 — MARKER TEST
MARKER: 2026-02-22 — The LaunchAgent plist is the authoritative environment source for the gateway process. When rotating API keys, update all 5 locations: Keychain, openclaw.json, .zshrc, models.json, and the plist. Missing the plist cost 3 extra restarts.

### 23:39 — Pre-Compaction Memory Flush

**Active task:** Steven asked to identify and monitor Leopold Aschenbrenner's fund (Situational Awareness LP) for new 13F filings. He wants alerts when new trades are publicly released.

**Key findings this session:**
- **Fund:** Situational Awareness LP (CIK: 0002045724)
- **Manager:** Leopold Aschenbrenner (ex-OpenAI researcher)
- **AUM:** ~$5.5B in 13F securities (Q4 2025)
- **Top holdings:** $BE (~22% port), $LITE (~12% port), CRWV calls, INTC calls
- **Thesis:** AI infrastructure — power/electricity + optical networking
- **Tracking sources:** WhaleWisdom, 13f.info, Insider Monkey, SEC EDGAR
- **Next filing:** Q1 2026, due ~May 15, 2026
- **Action needed:** Set up cron to monitor EDGAR for new filings, alert Steven on Telegram

**Tonight's completed work (full session summary):**
1. Codex CLI OAuth + Claude Code API key auth — both verified working
2. TOOLS.md updated with Coding Agents section
3. OpenAI API key rotated — learned ALL 5 locations (Keychain, openclaw.json, .zshrc, models.json, LaunchAgent plist)
4. memoryFlush enabled (agents.defaults.compaction.memoryFlush, 4K threshold)
5. contextPruning enabled (cache-ttl, 1h, keepLastAssistants=3)
6. AGENTS.md: Added Active Retrieval Rule + Session Handover Protocol
7. X article by @code_rams assessed — 5 memory gaps identified, 3 addressed
8. Mem0 strategy decided: Option B (manual store, files authoritative, Mem0 = search index)
9. 8 memories stored to Mem0 covering key lessons
10. MARKER test planted for tomorrow's session verification

**Incident:** Top-level `compaction` key in openclaw.json → 4+ restart loops, LaunchAgent corruption. Root cause: skipped schema validation. Fixed by adding mandatory `openclaw doctor` to pre/post restart checklists.

**Pending:**
- Set up Situational Awareness LP 13F monitoring cron
- One more restart needed to fully verify all systems (deferred — enough restarts tonight)
- System prompt bloat audit (deferred)
- Tomorrow: verify MARKER test retrieval
